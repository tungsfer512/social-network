humhub.module("calendar.reminder.Form",function(i,e,n){var t=e("ui.widget").Widget,r=e("client"),a=".calendar-reminder-items",d=".calendar-reminder-item-defaults",c='.btn-primary[data-action-click="add"]',o=t.extend();o.prototype.init=function(e){this.checkMaxReminder(),this.checkRemidnerType()},o.prototype.checkMaxReminder=function(){this.$.find(a).find("[data-reminder-index]").length>=this.options.maxReminder?this.$.find(c).hide():this.$.find(c).show()},o.prototype.checkRemidnerType=function(){var e=n("#remindersettings-remindertype").val();0==e?(n(a).hide(),n(d).hide()):2==e?(n(a).show(),n(d).hide()):1==e&&(n(a).hide(),n(d).show())},o.prototype.delete=function(e){var t=this;e.$trigger.closest(".row").fadeOut("fast",function(){n(this).remove(),t.checkMaxReminder()})},o.prototype.add=function(e){var t=e.$trigger.closest(".row"),i=parseInt(t.attr("data-reminder-index")),r=t.clone().attr("data-reminder-index",++i);r.find("[name]").each(function(){var e=n(this).attr("name").replace(/CalendarReminder\[[0-9]]/,"CalendarReminder["+i+"]");n(this).attr("name",e)}),r.insertAfter(t),e.$trigger.data("action-click","delete").removeClass("btn-primary").addClass("btn-danger").find("i").removeClass("fa-plus").addClass("fa-times"),this.checkMaxReminder()},o.prototype.reset=function(e){var t=this.$.find(".calendar-reminder-items");r.post(e).then(function(e){t.replaceWith(n(e.html).find(".calendar-reminder-items")),i.log.success("saved")}).catch(function(e){i.log.error(e,!0)})},i.export=o});